# Система фильтрации контента для CineGuide

## Обзор

Система фильтрации контента разработана для обеспечения соответствия приложения правилам платформы ВКонтакте. Фильтрация применяется ко всем фильмам, отображаемым в приложении.

## Компоненты системы

### 1. Утилита фильтрации (`src/utils/contentFilter.ts`)

Основная логика фильтрации контента:

- **`isContentSafe(content)`** - проверяет безопасность контента
- **`filterSafeContent(movies)`** - фильтрует массив фильмов
- **`logBlockedContent(content, reason)`** - логирует заблокированный контент
- **`getFilterStats()`** - получает статистику фильтрации

### 2. Конфигурация (`src/config/contentFilterConfig.ts`)

Настройки фильтрации:

- Запрещенные ключевые слова
- Запрещенные жанры
- Минимальный рейтинг и год выпуска
- Настройки логирования

### 3. Компонент информации (`src/components/ContentFilterInfo.tsx`)

Отображает информацию о фильтрации контента для пользователей.

## Критерии фильтрации

### Запрещенные ключевые слова

Фильмы исключаются, если их название или описание содержит:

- **Насилие и жестокость**: убийство, кровь, насилие, пытка
- **Наркотики**: героин, кокаин, марихуана, амфетамин
- **Экстремизм**: нацизм, фашизм, расизм, ксенофобия
- **Суицид**: суицид, самоубийство, самоповреждение
- **Порнография и эротика**: порно, эротика, секс, похоть, вожделение, страсть
- **Эротические слова**: dirty, steamy, hot, sexy, adult, mature, nude, naked
- **Специфические эротические фильмы**: sorority, ligaw, tatsulok, udovolstvie, удовольствие, pleasure, salome, kiskisan, sweet whip, сладкий кнут
- **Корейские эротические слова**: 욕망 (yokmang), 새엄마 (saeeomma), 개인교수 (private tutor), 화려한 (luxurious), 은밀함 (secrets)
- **Японские эротические слова**: 女教師 (female teacher), 扉 (door), 閉めた (closed), 濃厚 (rich), 濃密 (dense)
- **Китайские эротические слова**: 我為卿狂 (wo wei qing kuang)
- **Русские эротические слова**: частные уроки, удовольствие
- **Нецензурная лексика**: мат и оскорбления
- **Преступная деятельность**: терроризм, взрыв, оружие

### Запрещенные жанры

Исключаются фильмы жанров:
- Ужасы (Horror)
- Триллер (Thriller)
- Криминал (Crime)
- Военный (War)

### Дополнительные критерии

- **Минимальный рейтинг**: 1.0 (снижен для нормальных фильмов)
- **Минимальный год выпуска**: 1950
- **Специальные проверки**:
  - Фильмы с рейтингом ниже 2.0 И эротическими элементами в названии
  - Фильмы с определенными эротическими паттернами в названии (независимо от рейтинга)
  - Азиатские фильмы 2010+ года с рейтингом ниже 3.0 и эротическими словами

## Интеграция в приложение

### Главная страница (`src/pages/Home.tsx`)
- Отображается компонент `ContentFilterInfo`
- Фильтрация применяется в `InfiniteScroll`

### Детальная страница фильма (`src/pages/MovieDetail.tsx`)
- Проверка безопасности при загрузке фильма
- Перенаправление на главную при нарушении правил

### Страница избранного (`src/pages/Favorites.tsx`)
- Фильтрация избранных фильмов

## Логирование

Система ведет статистику фильтрации:
- Общее количество проверенных фильмов
- Количество заблокированных фильмов
- Детализация по причинам блокировки

## Настройка

Для изменения правил фильтрации отредактируйте файл `src/config/contentFilterConfig.ts`:

```typescript
export const CONTENT_FILTER_CONFIG = {
  MIN_RATING: 3.0,
  MIN_YEAR: 1950,
  FORBIDDEN_KEYWORDS: [...],
  FORBIDDEN_GENRES: [...],
  LOGGING: {
    ENABLED: true,
    LOG_BLOCKED_CONTENT: true,
    LOG_FILTER_STATS: true
  }
};
```

## Соответствие правилам ВК

Система фильтрации обеспечивает соответствие следующим требованиям ВК:

✅ Не содержит контент, способствующий незаконным действиям  
✅ Исключает насилие и жестокость  
✅ Не содержит описания суицида  
✅ Исключает экстремистские материалы  
✅ Не пропагандирует преступную деятельность  
✅ Исключает рекламу наркотических веществ  
✅ Не вводит пользователей в заблуждение  

## Мониторинг

Для мониторинга работы фильтрации используйте:

```typescript
import { getFilterStats } from '../utils/contentFilter';

const stats = getFilterStats();
console.log('Статистика фильтрации:', stats);
```

## Тестирование

Система фильтрации протестирована на:
- Различных жанрах фильмов
- Фильмах с запрещенными ключевыми словами
- Фильмах с низким рейтингом
- Старых фильмах
- Фильмах с небезопасным описанием
- **Специфических эротических фильмах**:
  - Sorority (2025)
  - Ligaw (2025)
  - Tatsulok: Tatlo Magkasalo (2024)
  - Удовольствие (2021)
  - 我為卿狂 (1991)
  - Kelas Bintang - Salome (2023)
  - 扉を閉めた女教師 (2021)
  - Kiskisan (2024)
  - Частные уроки (2013)
  - Сладкий кнут / Sweet Whip (2013) 